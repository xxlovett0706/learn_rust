# 迭代器

## 迭代器模式

1. 设计模式中的一种行为模式
2. 常与集合使用，不暴露集合底层的情况下遍历集合元素
3. 将集合的便利行为抽象为单独的迭代对象

```rust
trait Iterator {
    type Item;
    fn next(&mut self) -> Option<Self::Item>
}
```

### for 循环 外部迭代器语法糖

```rust
fn main () {
    let v = vec![1, 2, 3, 4, 5];
    // 等价于 for 循环的scope
    {
        let mut _iterator = v.into_iter();
        loop {
            match _iterator.next() {
                Some(i) => {
                    println!("{}", i);
                },
                None => break,
            }
        }
    }
}
```

### 自定义内部迭代器

内部迭代器已非主要迭代方式

```rust
trait InIterator<T: Copy> {
    fn each<F: Fn(T)>
}

impl<T: Copy> InIterator<T> for Vec<T> {
    fn each<F: Fn(T) -> T>(&mut self, f: F) {
        let mut i = 0;
        while i < self.len() {
            self[i] = f(self[i]);
            i += 1;
        }
    }
}

fn main () {
    let mut v = vec![1, 2, 3];
    v.each(|i| i * 3);
    assert_eq!(&v[..3], [3, 6, 9]);
}
```

### 迭代器 3 种形式

1. `iter()`
2. `iter_mut()`
3. `into_iter()`

## 标准库

1. IntoIter、Iter、iter_mut
2. 标准库内建的迭代器适配器
3. 标准库内建的迭代器消费器
4. 迭代器在字符串和集合中的应用

## 第三方库 itertools
